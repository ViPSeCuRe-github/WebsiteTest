<script>
  // Parse the URL to get the 'slug' parameter
  const params = new URLSearchParams(window.location.search);
  const slug = params.get("slug");

  // Check if the 'slug' exists in localStorage
  const pageData = localStorage.getItem(slug);
  if (pageData) {
    // If the page data exists, display it
    const { title, content } = JSON.parse(pageData);

    // Update the title and content of the page
    document.getElementById("page-title").innerText = title;
    const contentField = document.getElementById("page-content");
    contentField.value = content;

    // Save edits to localStorage when the user types
    contentField.addEventListener("input", (e) => {
      const updatedContent = e.target.value;
      localStorage.setItem(
        slug,
        JSON.stringify({ title, content: updatedContent, slug })
      );
    });
  } else {
    // If no data is found, display an error message
    document.body.innerHTML = `
      <h1>Page Not Found</h1>
      <p>The note you are trying to access does not exist.</p>
      <a href="index.html">Go back to home</a>
    `;
  }
</script>
